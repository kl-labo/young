# Springとは

## 概要

Spring Frameworkは、Javaプラットフォーム向けのオープンソースアプリケーションフレームワークである。一貫した機能の構成を提供し、その構成をJavaプラットフォーム上で作成される様々なアプリケーションに適用することができる。

## Springを構成するモジュール

Spring Framework は様々なサービスを提供するいくつかのモジュールから構成されている。

以下に代表的なモジュールとその説明を記載する。

#### Spring MVC

Spring MVCはModel-View-Controllerを実現するためのWebアプリケーションフレームワークである。同様のフレームワークとしては、StrutsやSAStruts、JSFなどが挙げられる。

主要なクラス・インタフェースを以下に示す。

- HandlerMapping
    - URLのパスとControllerを結び付けているインターフェイス

- ViewResolver
    - コントローラがDispatcherに投げたビュー名と実際のビュー(テンプレートファイル)のマッピングを行うインターフェイス

- HandlerInterceptor
    - リクエストに対しての共通処理を実装するためのインターフェイス
    Servlet Filterと同じようなもの

#### Spring Security

Spring Securityはアプリケーションのセキュリティを担う「認証」「認可」の2つの機能を提供する。

- 認証機能
    - ログインのようなユーザを識別する機能
- 認可機能
    - 認証済みのユーザの権限に応じてシステムのリソースに対するアクセス制御を行う機能

#### Spring Batch

Spring Batchはバッチ処理用に定義されたフレームワークである。様々なインターフェイスが定義されており、オフラインバッチに限らずオンラインバッチへの利用も可能である。

ファイル・DBへの読み書き、コミット/ロールバック制御等のバッチ処理に必要な基本的機能から、並列処理、バッチアベンド後のリラン制御などの機能も提供している。

#### Spring AOP

AOPとは「Aspect Oriented Programming」の略語で「アスペクト指向プログラミング」と称される。

AOPの目的は**関心事の分離**である。AOPを適用することで、クラスには売上計算や商品検索といった「本質的な処理」のみを記述し、それに必要な認証処理やトランザクション処理、ロギングといった「本質的ではない処理」を分離することが可能となる。

Spring AOPではアスペクトを記述するクラスには@Aspectアノテーションを付け、アスペクトの条件と処理を書くメソッドには@Aroundなどのアノテーションを付けることで実装する。

#### Spring JDBC

Spring JDBCは、SpringがJDBCを抽象化したフレームワークである。JDBC APIを直接使うよりも簡潔にデータアクセスコードを記述できるようになっている。

具体的にはConnectionの取得/解放、PreparedStatementやResultSetの隠蔽などを行ってくれる。

## Spring Boot

「Springを構成するモジュール」でSpringを構成するいくつかのモジュールを紹介したが、今回のサンプルアプリケーションの構築ではSpring Bootというフレームワークを利用している。

Spring Bootとは「Springの提供するモジュールを新しい形で統合したフレームワーク」である。Spring Bootはいかに簡単に使えるアプリケーションを作るかで設計されており、内部では様々なSpringのフレームワークが使われているが、開発者はそれらを意識する必要が全くない。

Spring Bootの特徴として以下の２点が挙げられる。

- XML不要
    - Springの特徴である「XMLによる各種設定ファイル」を使用しない。その代わりにJavaコードにアノテーションを書くことで、全て自動的に設定が行われる。

- デプロイ不要
    - MavenやGradleコマンドを使ってビルドすると自動的にTomcatなどのサーブレットコンテナが組み込まれ、このコンテナ上でアプリケーションが実行される。そのためプロジェクトをWARファイルにまとめたり、サーバへのデプロイ作業が不要になる。

## Springが選ばれる理由

Springが選ばれる一つの例として「他のオープンソースソフトウェアとの連携に優れている」という点が挙げられる。

SpringはHibernate、 Struts、Velocity、FreeMarkerなどの外部のオープンソースソフトウェアとの連携に非常に優れている。たとえばアプリケーションの出力先として、 HTML(JSP・Velocity・FreeMarker)、XML（XLST）、Excel、PDFなどを選択できる。

また、データベースのアクセスライブラリとしては、HibernateやJDO、Oracle TopLinkなどを選択できる。

Springフレームワークを採用することで、将来新しいフレームワークやライブラリが登場したとしても、アプリケーションの本体部分を変更することなく、出力部分を差し替えるだけで対応できる。

## Spring Bootが選ばれる理由

正しくモジュール分割されたフレームワークは、コアとなる機能（Spring Framework）があり、関連するモジュール（Spring SecurityとかSpring AOP）を取捨選択することになる。関連するモジュールが多くなってしまうと、どのモジュールを使うべきか、組み合わせをどうするべきか検討しなければならない。これらは非常にコストのかかる作業となる。

Spring Bootは、現在のSpringの抱える**「関連プロダクトが多すぎてどれを選べばいいか分からない」**という問題を解消してくれる。
